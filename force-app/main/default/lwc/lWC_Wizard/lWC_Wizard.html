<template>
    <lightning-progress-indicator current-step={currentStep} type="path" variant="base">
        <lightning-progress-step label="Step 1" value="1" onclick={handleOnStepClick}></lightning-progress-step>
        <lightning-progress-step label="Step 2" value="2" onclick={handleOnStepClick}></lightning-progress-step>
        <lightning-progress-step label="Step 3" value="3" onclick={handleOnStepClick}></lightning-progress-step>
    </lightning-progress-indicator>


    <div class="c-container" if:true={isStepOne}>
        <lightning-layout multiple-rows="true" >
            <lightning-layout-item padding="around-small" size="12">
                <lightning-layout horizontal-align={horizontalAlign}>
                    <lightning-layout-item flexibility="auto" padding="around-small">
                        <select class="slds-select" name = "optionSelect" onchange={changeHandler} >
                            <option value="null">pls select</option>
                            <option value="Lead">Lead</option>
                            <option value="Account">Account</option>
                            <option value="Contact">Contact</option>
                        </select>
                    </lightning-layout-item>
                </lightning-layout>
            </lightning-layout-item>
            <div class="c-container" if:true={isLead}>
                <lightning-card title="Lead List" icon-name="standard:lead">
                    <div class="slds-table--header-fixed_container" style="height:180px;">
                        <div class="slds-scrollable_y" style="height:100%;">
                            <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                                <thead>
                                    <tr class="slds-line-height_reset">
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Action">Action</div>
                                        </th>    
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Name">Name</div>
                                        </th>
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Email">Email</div>
                                        </th>
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Phone">Phone</div>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                        <template for:each={leadList} for:item="lead">
                                            <tr key={lead.id}>
                                                <td data-label="Action">
                                                    <div class="slds-truncate" title="Action">
                                                        <lightning-input class="slds-p-left_xx-large" value={lead.Email} type="checkbox"  onchange={handleFinish}>
                                                        </lightning-input>
                                                    </div>
                                                </td>
                                                <td data-label="First Name">
                                                    <div class="slds-truncate" title="Name">{lead.Name}</div>
                                                </td>
                                                <td data-label="Last Name">
                                                    <div class="slds-truncate" title="Email">{lead.Email}</div>
                                                </td>
                                                <td data-label="Phone">
                                                    <div class="slds-truncate" title="Phone">{lead.Phone}</div>
                                                </td>
                                            </tr>
                                        </template>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </lightning-card>
            </div>
            <div class="c-container" if:true={isAcc}>
                <lightning-card title="Account List" icon-name="standard:person_account">
                    <div class="slds-table--header-fixed_container" style="height:180px;">
                        <div class="slds-scrollable_y" style="height:100%;">
                            <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                                <thead>
                                    <tr class="slds-line-height_reset">
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Action">Action</div>
                                        </th>    
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Name">Name</div>
                                        </th>
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Email">Email</div>
                                        </th>
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Phone">Phone</div>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                        <template for:each={accountList} for:item="account">
                                            <tr key={account.id}>
                                                <td data-label="Action">
                                                    <div class="slds-truncate" title="Action">
                                                        <lightning-input class="slds-p-left_xx-large" value={account.email__c} type="checkbox" onchange={handleFinish} >
                                                        </lightning-input>
                                                    </div>
                                                </td>
                                                <td data-label="First Name">
                                                    <div class="slds-truncate" title="Name">{account.Name}</div>
                                                </td>
                                                <td data-label="Last Name">
                                                    <div class="slds-truncate" title="Email">{account.email__c}</div>
                                                </td>
                                                <td data-label="Phone">
                                                    <div class="slds-truncate" title="Phone">{account.Phone}</div>
                                                </td>
                                            </tr>
                                        </template>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </lightning-card>
            </div>
            <div class="c-container" if:true={isCon}>
                <lightning-card title="Contact List" icon-name="standard:contact">
                    <div class="slds-table--header-fixed_container" style="height:180px;">
                        <div class="slds-scrollable_y" style="height:100%;">
                            <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                                <thead>
                                    <tr class="slds-line-height_reset">
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Action">Action</div>
                                        </th>     
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Name">Name</div>
                                        </th>
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Email">Email</div>
                                        </th>
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Phone">Phone</div>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                        <template for:each={contactList} for:item="contact">
                                            <tr key={contact.id}>
                                                <td data-label="Action">
                                                    <div class="slds-truncate" title="Action">
                                                        <lightning-input  class="slds-p-left_xx-large" value={contact.Email} type="checkbox" onchange={handleFinish} >
                                                        </lightning-input>
                                                    </div>
                                                </td>
                                                <td data-label="First Name">
                                                    <div class="slds-truncate" title="Name">{contact.Name}</div>
                                                </td>
                                                <td data-label="Last Name">
                                                    <div class="slds-truncate" title="Email">{contact.Email}</div>
                                                </td>
                                                <td data-label="Phone">
                                                    <div class="slds-truncate" title="Phone">{contact.Phone}</div>
                                                </td>
                                            </tr>
                                        </template>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </lightning-card>
            </div>
        </lightning-layout>
    </div>
    <template if:true={isStepTwo}>
        <!-- <div>
            <label style="border: 1px solid black; border-radius: 0%; background-color: gray;">{email}</label>
            <lightning-input type="text" name="Subject" label="Email Subject" value={emailsubject}
                onfocusout={getsubject}>
            </lightning-input>
            <lightning-textarea name="Body" label="Email Body" value={emailbody}
                onfocusout={getbody}></lightning-textarea>
        </div> -->
        <article class="slds-card">
            <div class="slds-card__body slds-card__body_inner">
                <!-- Body -->
                <div class="slds-form form slds-var-p-top_small">
                    <div class="slds-form-element">
                        <label class="slds-form-element__label" for="subject"> </label>
                        <div class="slds-form-element__control">
                            <input
                                type="text"
                                name="subject"
                                id="subject"
                                value={subject}
                                placeholder="Subject..."
                                class="slds-input"
                                onchange={handleSubjectChange}
                                onfocusout={getsubject}
                            />
                        </div>
                    </div>
    
                    <div class="slds-form-element">
                        <div class="slds-form-element__control slds-var-p-top_small">
                            <lightning-input-rich-text value={body} onchange={handleBodyChange}></lightning-input-rich-text>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slds-var-p-around_medium">
                <template for:each={files} for:item="file" for:index="index">
                    <lightning-pill
                        key={file.contentVersionId}
                        label={file.name}
                        onremove={handleRemove}
                        data-id={file.contentVersionId}
                        data-index={index}
                    >
                        <lightning-icon
                            icon-name="doctype:attachment"
                            size="xx-small"
                            alternative-text="attach"
                        ></lightning-icon>
                    </lightning-pill>
                </template>
            </div>
            <div class="slds-grid slds-grid_align-end slds-var-p-around_x-small">
                <div class="slds-col slds-var-p-right_x-small slds-var-p-bottom_x-small slds-is-relative">
                    <!-- Pop over -->
                    <section
                        if:true={wantToUploadFile}
                        aria-describedby="dialog-body-id-108"
                        aria-labelledby="dialog-heading-id-3"
                        class="slds-popover slds-popover_walkthrough slds-nubbin_bottom slds-is-absolute popover"
                        role="dialog"
                    >
                        <button
                            class="
                                slds-button slds-button_icon slds-button_icon-small
                                slds-float_right
                                slds-popover__close
                                slds-button_icon-inverse
                            "
                            title="Close dialog"
                        >
                            <lightning-button-icon
                                variant="bare-inverse"
                                size="small"
                                onclick={toggleFileUpload}
                                icon-name="utility:close"
                                alternative-text="close"
                            ></lightning-button-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                        <header class="slds-popover__header slds-p-vertical_medium">
                            <h2 id="dialog-heading-id-3" class="slds-text-heading_medium">Upload Files</h2>
                        </header>
                        <div class="slds-popover__body" id="dialog-body-id-108">
                            <lightning-file-upload
                                label="Attach files"
                                name="fileUploader"
                                accept={acceptedFormats}
                                record-id={myRecordId}
                                onuploadfinished={handleUploadFinished}
                                multiple
                            >
                            </lightning-file-upload>
                        </div>
                    </section>
                    <!-- Pop over -->
                    <lightning-button-icon
                        icon-name="utility:attach"
                        onclick={toggleFileUpload}
                        alternative-text="Attach File"
                        title="Attach_File"
                    >
                    </lightning-button-icon>
                </div>
                <div class="slds-col slds-var-p-right_x-small slds-var-p-bottom_x-small">
                    <lightning-button label="Reset" title="reset" onclick={handleReset}></lightning-button>
                </div>
                <!-- <div class="slds-col slds-var-p-right_x-small slds-var-p-bottom_x-small">
                    <lightning-button
                        variant="brand"
                        label="Send"
                        title="send"
                        onclick={handleSendEmail}
                    ></lightning-button>
                </div> -->
            </div>
        </article>
        <!-- <c-email-lwc></c-email-lwc> -->
    </template>
    <template if:true={isStepThree}>
        <lightning-card>
            <p>hii</p>
            {subject}
            {body}
            <lightning-output-field>{subject}</lightning-output-field>
            <lightning-output-field>{body}</lightning-output-field>
        
        </lightning-card>
    </template>
    
     
    <template if:true={isStepOne}>
        <div>Step  yash</div>
    </template>
    <template if:true={isStepTwo}>
        <div>Step 2</div>
    </template>
    <template if:true={isStepThree}>
        <div>Step 3</div>
    </template>
    <template if:true={isEnablePrev}>
        <lightning-button variant="brand" label="Back" onclick={handlePrev}></lightning-button>
    </template>
     
    <template if:true={isEnableNext}>
        <lightning-button label="Next" variant="brand" onclick={handleNext}></lightning-button>
    </template>
    <template if:true={isEnableFinish}>
        <lightning-button
        variant="brand"
        label="Send"
        title="send"
        onclick={handleSendEmail}
        disabled={disablePrevious}
    ></lightning-button>
    </template>
    <label for="FieldSelect" class="slds-form-element__label slds-no-flex">
        
    </label>
     
    
</template>